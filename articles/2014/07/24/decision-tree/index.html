<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<title>Decision Tree</title>
<meta content='' name='description'>
<meta content='width=device-width' name='viewport'>
<link href='/css/normalize.css' rel='stylesheet'>
<link href='/css/main.css' rel='stylesheet'>
<link href='/css/bootstrap.min.css' rel='stylesheet'>
<link href='/stylesheets/background.css' rel='stylesheet'>
<link href='/stylesheets/article.css' rel='stylesheet'>
<script src='/js/vendor/modernizr-2.6.1.min.js'></script>
<script src='/js/vendor/jquery-1.8.0.min.js'></script>
<script src='/js/bootstrap.min.js'></script>
<link href="/stylesheets/rouge.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/home.css" rel="stylesheet" type="text/css" />
</head>
<body>
<header>
<nav class='navbar navbar-default' role='navigation'>
<div class='navbar-header'>
<button class='navbar-toggle' data-target='.navbar-ex1-collapse' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
<a class='navbar-brand'></a>
</div>
<div class='collapse navbar-collapse navbar-ex1-collapse'>
<ul class='nav navbar-nav'>
<li>
<a href='/'>Home</a>
</li>
<li>
<a href='/feed.xml'>Feed</a>
</li>
<li>
<a href='/about'>About</a>
</li>
</ul>
</div>
</nav>
</header>
<section class='main'>
<div id='main' role='main'>
<div class='container'>
<article>
<div class='title'>
<h1 class='page-header text-center'>
Decision Tree
</h1>
</div>
<br>
<h2>数据分析服务: BigML</h2>

<p>今天我看到一个数据分析的服务，可以上传CSV的数据，分析后可以预测新的结果。</p>

<p>它有几个步骤</p>

<ol>
<li>上传CSV数据,并设定每行的数据类型，如数字，字符。数据最后一列必须是结果列</li>
<li>建立数据集，这个过程需要几秒或几小时。需要选定需要分析的属性，最终会给出一个属性列表，显示属性的一些统计数据：缺失数据，错误和直方图</li>
<li>建立模型，通过数据集生成模型</li>
<li>为新输入预测结果</li>
<li>建立ensembles，可以用所有的输入行和列来生产多个model，合成一个ensemble,用户可以这样比较哪种组合比较合理</li>
<li>评估模型或ensembles</li>
</ol>

<h2>背后的机器学习算法 decision tree</h2>

<p>decision tree是一种很直观的机器学习算法。给定一些training data,
里面包含了一些属性，算法的目的是学习隐藏在数据里的决策函数(decision
function),并可以用它来分类新的输入。
decision
tree算法不想用到所有的属性，而是想去掉那些弱因素，只保留强因素，并把强因素放在上方。</p>

<p><img alt="Decision Tree Example" src="/images/xdiscrete-tree.png.pagespeed.ic.png" /></p>

<p>每个属性的强弱可以用information gain表示，可以用公式计算。</p>

<p><img alt="Information Gain" src="/images/xinformation-gain-formula.png.pagespeed.ic.png" /></p>

<h2>Ruby gem for decision tree: decisiontree</h2>

<p>如果想自己做decision tree，不使用其他服务，可以用decisiontree这个ruby gem。</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'decisiontree'</span>

<span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'Education'</span><span class="p">,</span> <span class="s1">'Income'</span><span class="p">,</span> <span class="s1">'Marital Status'</span><span class="p">]</span>
<span class="n">training</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s1">'36-55'</span><span class="p">,</span> <span class="s1">'Masters'</span><span class="p">,</span> <span class="s1">'High'</span><span class="p">,</span> <span class="s1">'Single'</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'18-35'</span><span class="p">,</span> <span class="s1">'High School'</span><span class="p">,</span> <span class="s1">'Low'</span><span class="p">,</span> <span class="s1">'Single'</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'&lt; 18'</span><span class="p">,</span> <span class="s1">'High School'</span><span class="p">,</span> <span class="s1">'Low'</span><span class="p">,</span> <span class="s1">'Married'</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
  <span class="c1"># ... more training examples</span>
<span class="p">]</span>

<span class="c1"># Instantiate the tree, and train it based on the data (set default to '1')</span>
<span class="n">dec_tree</span> <span class="o">=</span> <span class="no">DecisionTree</span><span class="o">::</span><span class="no">ID3Tree</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">attributes</span><span class="p">,</span> <span class="n">training</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:discrete</span><span class="p">)</span>
<span class="n">dec_tree</span><span class="p">.</span><span class="nf">train</span>

<span class="nb">test</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'&lt; 18'</span><span class="p">,</span> <span class="s1">'High School'</span><span class="p">,</span> <span class="s1">'Low'</span><span class="p">,</span> <span class="s1">'Single'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">decision</span> <span class="o">=</span> <span class="n">dec_tree</span><span class="p">.</span><span class="nf">predict</span><span class="p">(</span><span class="nb">test</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Predicted: </span><span class="si">#{</span><span class="n">decision</span><span class="si">}</span><span class="s2"> ... True decision: </span><span class="si">#{</span><span class="nb">test</span><span class="p">.</span><span class="nf">last</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span>

<span class="c1"># Graph the tree, save to 'discrete.png'</span>
<span class="n">dec_tree</span><span class="p">.</span><span class="nf">graph</span><span class="p">(</span><span class="s2">"discrete"</span><span class="p">)</span>

</code></pre>

</article>
<div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'zyncrochinadevblog';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>
</div>
</section>
<footer>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-44086232-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</footer>
</body>
</html>
