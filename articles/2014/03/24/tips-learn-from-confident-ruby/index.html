<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<title>tips learn from confident ruby</title>
<meta content='' name='description'>
<meta content='width=device-width' name='viewport'>
<link href='/css/normalize.css' rel='stylesheet'>
<link href='/css/main.css' rel='stylesheet'>
<link href='/css/bootstrap.min.css' rel='stylesheet'>
<link href='/stylesheets/background.css' rel='stylesheet'>
<link href='/stylesheets/article.css' rel='stylesheet'>
<script src='/js/vendor/modernizr-2.6.1.min.js'></script>
<script src='/js/vendor/jquery-1.8.0.min.js'></script>
<script src='/js/bootstrap.min.js'></script>
<link href="/stylesheets/rouge.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/home.css" rel="stylesheet" type="text/css" />
</head>
<body>
<header>
<nav class='navbar navbar-default' role='navigation'>
<div class='navbar-header'>
<button class='navbar-toggle' data-target='.navbar-ex1-collapse' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
<a class='navbar-brand'></a>
</div>
<div class='collapse navbar-collapse navbar-ex1-collapse'>
<ul class='nav navbar-nav'>
<li>
<a href='/'>Home</a>
</li>
<li>
<a href='/feed.xml'>Feed</a>
</li>
<li>
<a href='/about'>About</a>
</li>
</ul>
</div>
</nav>
</header>
<section class='main'>
<div id='main' role='main'>
<div class='container'>
<article>
<div class='title'>
<h1 class='page-header text-center'>
tips learn from confident ruby
</h1>
</div>
<br>
<h2>The book confident ruby</h2>

<p>After reading the book confident ruby, I watch the screen cast with that book
and learned following tips</p>

<h3>use each<em>with</em>object instead of initialize an empty object before the each</h3>
<pre class="highlight ruby"><code>
<span class="n">topics_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">another_list</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="n">topics_list</span> <span class="o">&lt;&lt;</span> <span class="n">i</span>
<span class="k">end</span>
</code></pre>

<p>should turn into</p>
<pre class="highlight ruby"><code>
<span class="n">result</span> <span class="o">=</span> <span class="n">another_list</span><span class="p">.</span><span class="nf">each_with_object</span><span class="p">([])</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="p">,</span> <span class="n">topics_list</span><span class="o">|</span>
  <span class="n">topics_list</span> <span class="o">&lt;&lt;</span> <span class="n">i</span>
<span class="k">end</span>

</code></pre>

<h3>don&rsquo;t use collection.present? to check if collection exist and nonempty ,use Array()</h3>

<h3>skip the iteration at the top of the block</h3>
<pre class="highlight ruby"><code>
<span class="k">next</span> <span class="k">unless</span> <span class="n">topics</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
</code></pre>

<h3>accept user or user_id with confident</h3>
<pre class="highlight ruby"><code>
<span class="n">user_id</span> <span class="o">=</span> <span class="n">user</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="nf">id</span> <span class="k">unless</span> <span class="n">user</span><span class="p">.</span><span class="nf">class</span> <span class="o">==</span> <span class="no">Fixnum</span>
</code></pre>

<p>To reduce the duplication, refactor to:
&ldquo;`ruby</p>

<p>private
def user<em>id</em>for(user<em>or</em>id)
  case user<em>or</em>id
  when Integer then user<em>or</em>id
  else
    user<em>or</em>id.id
  end
end
&rdquo;`</p>

<p>if define the private method, then use:</p>
<pre class="highlight ruby"><code>
<span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">user_id_for</span>
<span class="p">.</span><span class="nf">.</span><span class="p">.</span>
<span class="nf">end</span>
<span class="nb">private_class_method</span> <span class="ss">:user_id_for</span>
</code></pre>

<h3>return early(using guard) instead of using if at the top of the method</h3>

<h3>rescue at the top level of the method, to avoid the indent and begin block</h3>

</article>
<div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'zyncrochinadevblog';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>
</div>
</section>
<footer>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-44086232-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</footer>
</body>
</html>
