<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<title>Write presentation in markdown and hosted on heroku</title>
<meta content='' name='description'>
<meta content='width=device-width' name='viewport'>
<link href='/css/normalize.css' rel='stylesheet'>
<link href='/css/main.css' rel='stylesheet'>
<link href='/css/bootstrap.min.css' rel='stylesheet'>
<link href='/stylesheets/background.css' rel='stylesheet'>
<link href='/stylesheets/article.css' rel='stylesheet'>
<script src='/js/vendor/modernizr-2.6.1.min.js'></script>
<script src='/js/vendor/jquery-1.8.0.min.js'></script>
<script src='/js/bootstrap.min.js'></script>
<link href="/stylesheets/rouge.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/home.css" rel="stylesheet" type="text/css" />
</head>
<body>
<header>
<nav class='navbar navbar-default' role='navigation'>
<div class='navbar-header'>
<button class='navbar-toggle' data-target='.navbar-ex1-collapse' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
<a class='navbar-brand'></a>
</div>
<div class='collapse navbar-collapse navbar-ex1-collapse'>
<ul class='nav navbar-nav'>
<li>
<a href='/'>Home</a>
</li>
<li>
<a href='/feed.xml'>Feed</a>
</li>
<li>
<a href='/about'>About</a>
</li>
</ul>
</div>
</nav>
</header>
<section class='main'>
<div id='main' role='main'>
<div class='container'>
<article>
<div class='title'>
<h1 class='page-header text-center'>
Write presentation in markdown and hosted on heroku
</h1>
</div>
<br>
<h2>Write docs in Markdown</h2>

<p>As more and more docs and email can be written in markdown format, It is time
to try it in the slides/presentation.</p>

<h2>Reveal.js</h2>

<p>Seems reveal.js is very easy to use, I try to use it to write slides, and
I hope it can be hosted on heroku, so I can use it no matter what devices I am
using, and where I am.</p>

<h2>Installation</h2>

<h3>install reveal.js</h3>
<pre class="highlight shell"><code>
git clone git@github.com:MichaelBitard/revealjs_heroku.git

</code></pre>

<h3>use express to host</h3>
<pre class="highlight javascript"><code><span class="c1">//web.js</span>

<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"express"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">logger</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s2">"/"</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">));</span>

<span class="kd">var</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">5000</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Listening on "</span> <span class="o">+</span> <span class="nx">port</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<h3>add heroku Procfile</h3>
<pre class="highlight shell"><code>
web: node web.js

</code></pre>

<h3>add http basic auth to protect the content</h3>
<pre class="highlight javascript"><code>
<span class="kd">var</span> <span class="nx">auth</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http-auth'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">basic</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">basic</span><span class="p">({</span>
    <span class="na">realm</span><span class="p">:</span> <span class="s2">"Zyncro China Presentation."</span><span class="p">,</span>
    <span class="na">file</span><span class="p">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s2">"/data/users.htpasswd"</span> <span class="c1">// gevorg:gpass, Sarah:testpass ...</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">auth</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">basic</span><span class="p">));</span>
</code></pre>

<h3>generate the user/password</h3>
<pre class="highlight shell"><code>
mkdir data; <span class="nb">cd </span>data
htpasswd -c users.htpasswd david
</code></pre>

<h3>use haml template</h3>
<pre class="highlight plaintext"><code>
npm install grunt-contrib-haml --save
</code></pre>

<p>Then add haml task and enable livereload into Gruntfile.js</p>
<pre class="highlight javascript"><code>
<span class="nl">haml</span><span class="p">:</span> <span class="p">{</span>                              <span class="c1">// Task</span>
  <span class="nl">dist</span><span class="p">:</span> <span class="p">{</span>                            <span class="c1">// Target</span>
    <span class="nl">files</span><span class="p">:</span> <span class="p">{</span>                         <span class="c1">// Dictionary of files</span>
      <span class="s1">'index.html'</span><span class="err">:</span> <span class="s1">'index.haml'</span><span class="p">,</span>       <span class="c1">// 'destination': 'source'</span>
      <span class="s1">'widgets.html'</span><span class="err">:</span> <span class="s1">'widgets.haml'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>


<span class="nx">watch</span><span class="err">:</span> <span class="p">{</span>
        <span class="nl">haml</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">files</span><span class="p">:</span> <span class="p">[</span> <span class="s1">'*.haml'</span> <span class="p">],</span>
        <span class="nx">tasks</span><span class="err">:</span> <span class="s1">'haml'</span><span class="p">,</span>
                <span class="nx">options</span><span class="err">:</span> <span class="p">{</span>
                  <span class="nl">livereload</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h3>use markdown in haml template</h3>

<p>To use markdown in haml, we need to use the following format:</p>
<pre class="highlight plaintext"><code>
%section{"data-markdown" =&gt;""}
  %script{:type =&gt; "text/template"}
    :markdown
      ## Requirement
        1. support CRUD operation
          1. JSON Format
        1. HTTP REST Interface
        1. Reliable and Scalable

</code></pre>

<h3>troubleshooting</h3>

<p>If express start failed(call: node web.js), then select the express version:
3.1.x</p>

</article>
<div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'zyncrochinadevblog';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>
</div>
</section>
<footer>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-44086232-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</footer>
</body>
</html>
